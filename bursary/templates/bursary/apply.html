{% extends "bursary/base.html" %}
{% load static %}

{% block content %}
<h2>Submit Bursary Application</h2>

<!-- SUCCESS & ERROR MESSAGES -->
{% if messages %}
  {% for message in messages %}
    <div style="padding:10px; margin-bottom:10px; color:white;
      background-color:{% if message.tags == 'success' %}green{% else %}red{% endif %};">
      {{ message }}
    </div>
  {% endfor %}
{% endif %}

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <style>
        .errorlist {
            color: red;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        fieldset {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ccc;
        }
        legend {
            font-weight: bold;
        }
        label {
            display: block;
            margin-top: 10px;
        }
    </style>

    <!-- LOCATION -->
    <label>County</label>
    {{ form.county.errors }}
    {{ form.county }}

    <label>Constituency</label>
    {{ form.constituency.errors }}
    {{ form.constituency }}

    <label>Level of Study</label>
    {{ form.level_of_study.errors }}
    {{ form.level_of_study }}

    <!-- PERSONAL DETAILS -->
    <fieldset>
        <legend>Personal Details</legend>

        <label>Full Name</label>
        {{ form.full_name.errors }}
        {{ form.full_name }}

        <label>ID Number</label>
        <input type="text" name="id_number">

        <label>Birth Certificate Number</label>
        <input type="text" name="birth_cert_number">

        <label>Upload ID / Birth Certificate</label>
        <input type="file" name="identity_document">

        <label>Gender</label>
        <input type="radio" name="gender" value="male"> Male
        <input type="radio" name="gender" value="female"> Female

        <label>Disability</label>
        <input type="checkbox" id="disability_yes"> Yes
        <input type="checkbox" id="disability_no"> No

        <div id="disability_details" style="display:none;">
            <label>Disability Details</label>
            <textarea name="disability_details"></textarea>
        </div>
    </fieldset>

    <!-- EDUCATION DETAILS -->
    <fieldset>
        <legend>Educational Details</legend>

        <label>Registration / Admission Number</label>
        {{ form.admission_number.errors }}
        {{ form.admission_number }}

        <label>School</label>
        {{ form.school.errors }}
        {{ form.school }}

        <label>Course of Study</label>
        {{ form.course.errors }}
        {{ form.course }}

        <label>Year of Study</label>
        {{ form.year_of_study.errors }}
        {{ form.year_of_study }}

        <label>Annual Fees Payable</label>
        {{ form.amount_requested.errors }}
        {{ form.amount_requested }}

        <label>Upload Fee Structure</label>
        {{ form.document.errors }}
        {{ form.document }}

        <label>Average Academic Performance</label>
        <input type="radio" name="performance" value="excellent"> Excellent
        <input type="radio" name="performance" value="very_good"> Very Good
        <input type="radio" name="performance" value="good"> Good
        <input type="radio" name="performance" value="fair"> Fair
        <input type="radio" name="performance" value="poor"> Poor

        <label>Upload Recent Transcript</label>
        <input type="file" name="transcript">
    </fieldset>

    <!-- GEO DETAILS -->
    <fieldset>
        <legend>Geographical Details</legend>

        <label>Polling Station</label>
        <input type="text" name="polling_station">

        <label>Sub-location</label>
        <input type="text" name="sub_location">

        <label>Location</label>
        <input type="text" name="location">

        <label>Ward</label>
        <input type="text" name="ward">
    </fieldset>

    <!-- FAMILY DETAILS -->
    <fieldset>
        <legend>Family Details</legend>

        <label>Parents Status</label>
        <select id="parents_status" name="parents_status">
            <option value="">-- Select --</option>
            <option value="both_alive">Both Parents Alive</option>
            <option value="mother_only">Single Mother</option>
            <option value="father_only">Single Father</option>
            <option value="orphan">Total Orphan</option>
        </select>

        <div id="family_details" style="display:none;">
            <label>Parent / Guardian Name</label>
            <input type="text" name="parent_name">

            <label>Phone Number</label>
            <input type="text" name="parent_phone">

            <label>Occupation</label>
            <input type="text" name="parent_occupation">

            <label>Upload Supporting Document</label>
            <input type="file" name="parent_document">
        </div>
    </fieldset>

    <!-- SIBLINGS -->
    <fieldset>
        <legend>Siblings in School</legend>

        <label>Number of Siblings</label>
        <input type="number" name="siblings_count">

        <table border="1" width="100%">
            <tr>
                <th>Name</th>
                <th>Level of Study</th>
                <th>Amount Payable Per Year</th>
            </tr>
            <tr>
                <td><input type="text" name="sibling_name[]"></td>
                <td><input type="text" name="sibling_level[]"></td>
                <td><input type="number" name="sibling_amount[]"></td>
            </tr>
        </table>
    </fieldset>

    <!-- REFEREES -->
    <fieldset>
        <legend>Referees</legend>

        <label>Referee 1 Name</label>
        <input type="text" name="referee1_name">

        <label>Referee 1 Phone</label>
        <input type="text" name="referee1_phone">

        <label>Referee 2 Name</label>
        <input type="text" name="referee2_name">

        <label>Referee 2 Phone</label>
        <input type="text" name="referee2_phone">
    </fieldset>

    <br>
    <button type="submit">Submit Application</button>
</form>

<!-- SIMPLE JS -->
<script>
document.getElementById("disability_yes").addEventListener("change", function () {
    document.getElementById("disability_details").style.display = "block";
});

document.getElementById("parents_status").addEventListener("change", function () {
    document.getElementById("family_details").style.display = this.value ? "block" : "none";
});
</script>

{% endblock %}
